<!doctype html>
<head>
<meta charset='utf-8' />
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
<meta name='format-detection' content='telephone=no' />
<meta name='format-detection' content='email=no' />
<title></title>
<style>
*{margin:0px;padding:0px;}
body{background:#F0F1F3;}
	.question_div{
		margin-top:20px;
		background: #fff;
		font-size: 20px;
		padding:20px;
	}
	.question_div p{
		color: #5B5B66;
		padding:5px;
	}
	.question_div div{
		padding:7px;
	}
   label{
   	color: #8D8D8D;
   	font-size: 18px;
   	padding:10px;
   	padding-left: 0px;
   	vertical-align: middle;
   }
   input[type='radio']{
   	width:16px;
   	height:16px;
   }
</style>
<style>
*{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}img{border:0}ol,ul{list-style:none}body{font:'MicroSoft YaHei';-webkit-overflow-scrolling:touch}#homepage{position:absolute;top:0;left:0;bottom:0;right:0;background:#fff}.header{position:relative;padding-bottom:18px;text-align:center}.header:after{content:"";position:absolute;left:0;right:0;bottom:0;width:100%;height:1px;-webkit-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:center bottom;transform-origin:center bottom;background:#eeeeee}.header-tip{position:absolute;left:0;right:0;top:20px;font-size:12px;color:#333333}.header-img{margin-top:50px;height:auto}.header-type{padding-top:12px;font-size:15px;color:#333333}.header-result{padding-top:13px;font-size:12px;color:#999999}.container{padding:0 15px;padding-top:18px}.container-title{padding-bottom:12px;font-weight:400;font-size:15px;color:#333333}.container-txt{margin-bottom:8px;font-size:14px;color:#666666}.container-txt:after{content:"";display:table;clear:both}.container-txt:last-child{margin-bottom:0}.container-txt span{float:left}.container-txt-s{margin-left:8px;width:72%;color:#333333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.btn-group{margin:45px 15px 0 15px}.appraisal-btn{width:100%;padding:12px 0;font-size:18px;color:#fff;background:#e93030;border-radius:8px;border:none;outline:none}#answer_page{position:absolute;top:0;left:0;bottom:0;right:0;background:#f1f1f1}.question_div{position:relative;margin:0;padding:0}.question_div:after{content:"";position:absolute;left:0;right:0;bottom:0;width:100%;height:1px;-webkit-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:center bottom;transform-origin:center bottom;background:#dddddd}.question_div p{position:relative;padding:13px 15px;font-size:15px;color:#333333;background:#f9f9f9}.question_div p:after{content:"";position:absolute;left:0;right:0;bottom:0;width:100%;height:1px;-webkit-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:center bottom;transform-origin:center bottom;background:#dddddd}.question_div div{position:relative;padding:0 0 0 15px;font-size:14px;color:#666666}.question_div input[type='radio'],.question_div input[type='checkbox']{position:absolute;top:0;left:0;visibility:hidden}.question_div input[type='radio']:checked ~ label,.question_div input[type='checkbox']:checked ~ label{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAnCAYAAACbgcH8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAALfSURBVHjazJhNbExRFMd/M30l6UIi9HZBIr4WbUn6wl4qIUhbS7ERdGHDriLx0UoQurERC6SWSjLdiCIjvhJCUGdDiBARQUzThRBTosbmjkwm7777vjsnmc09d+b+5uac/z3n5L52dTGbpkR8/SXXbQb2AOeVyG+APA1sJdddANwCzgCFkuvOaWjokut2AE+BdXqptwpug87pT9bAG4BHwNI6Vy9wJW8BdoDmjIH7gevAPA/3d2DE8fl+HmgCpjOCzQHHgEOGLe+AXiXyyrGERVbADnAB2GnY8gJYr0QmAXIGycsDfzOKiBZgDNhk8D8BtiiRqeqCY7jlrIBbdfyuNfgngI1K5FvtojOLqrYYuAGsMvjfAJvrgb2gc0AlA+BlQBFYbvB/1jc86eWsh84CuF2/cosM/jLQp0Q+mH4g6/BYDdwBFhr8FaBfiUxg0eJGAQYYViKjHpI4V8uiFboTGNWSFNdWBAB+ABw2aLgDzNjCoxO4DSigDegBfsYAvmcBngK2K5EZQ8iUlcj/fPN6XDr0rbTVrN2NCL4EeOiTdFXrUSLjQX+0PjyagKt1wADdwLWQodJqUYmqnQsD7AU9Axww7A0D3qIfjpWWfW+BgbDx5pWIY8BgDPAm4BKwxnJ2BdilRH5EgfYCPw5cjgh+Etga4OyzWjGIAt1suIXdut0JA74N2B/g3I/Awaj6mfeRvbK+sU8BwduBiwHP3au7kMjQv3z8X4A+/Qf8wOfrOA6SpONaoYgD/cey5zmww8ffrcvIIAOUaWBf3Oc1aO1R8FEULK9drZ0G3mcFbVOUQK0gcCqJyisMtE1RbDYYJ/nilKY2RTHZS2AkqRo3Sj1tUxQvGwiQ8KlCB1GUWrsP3Eyym4jTudgUpWpHk26B4rZbNkUp6gagoaBtijKURrOZRGNrUpQi8LhRoU2KMpxWW5/kCKFWUZ7pPjMVS3pYUwCOAK/THKCkMWE6kfbU598AD3i6CvtPpPMAAAAASUVORK5CYII=") no-repeat center right;background-position:center right 15px;background-size:22.5px auto}.question_div label{position:relative;display:block;width:100%;padding:13px 0;padding-right:30px;font-size:14px;color:#666666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.question_div label:after{content:"";position:absolute;left:0;right:0;bottom:0;width:100%;height:1px;-webkit-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:center bottom;transform-origin:center bottom;background:#dddddd}.questio
n_div div:last-child label:after{display:none}#answer p{padding:15px;text-align:center}#reset_btn{margin:auto;margin-top:30px;width:65%;height:40px;line-height:40px;color:white;text-align:center;background:#4691ee;border:1px solid #4691ee;border-radius:5px;outline:none}
/*# sourceMappingURL=risk_appraisal.css.map */
#no-risk h3{ position: relative;padding: 13px 15px;font-size: 15px;color: #333333;background: #f9f9f9;}
#no-risk p{ padding: 13px 15px 0;font-size: 14px;color: #666666;position: relative;display: block;width: 100%;text-indent: 2em;background: #fff;}
#no-risk p{ padding-bottom: 15px; }
#no-risk{ display: none; }
</style>
</head>
<body>
	<form id = 'Q_form' onsubmit="return false;">
		<div id='hiddenModalContent'>
		</div>
		<br>
	</form>
	<div align="center" style="display:none;" id="btn">
	 	<button name="submit"  style="width:65%; height:40px;background:#4691ee;color:white;vertical-align:middle;border:1px solid #4691ee;margin:0px auto; border-radius:5px; margin-bottom:30px;outline: none;"  onclick="do_ans_question();"><font size="4">提 交</font></button>
	</div>
    <div id = "answer">
    </div>
	<div id="msg"></div>
	<input type="button"  value="reTest" id="reset_btn" onclick="reTest();" style="display:none;"/>
</body>
<script type="text/javascript">

var question = [{"answer":[{"a_no":"1","a_display":"工资、劳务报酬"},{"a_no":"2","a_display":"生产经营所得"},{"a_no":"3","a_display":"利息、股息、转让证券等金融性资产收入"},{"a_no":"4","a_display":"出租、出售房地产等非金融性资产收入"},{"a_no":"5","a_display":"无固定收入"}],"q_type":"radio","q_no":"1","q_display":"您的主要收入来源是"},{"answer":[{"a_no":"1","a_display":"70%以上"},{"a_no":"2","a_display":"50%-70% "},{"a_no":"3","a_display":"30%－50%"},{"a_no":"4","a_display":"10%－30%"},{"a_no":"5","a_display":"10%以下"}],"q_type":"radio","q_no":"2","q_display":"最近您家庭预计进行证券投资的资金占家庭现有总资产(不含自住、自用房产及汽车等固定资产)的比例是"},{"answer":[{"a_no":"1","a_display":"没有"},{"a_no":"2","a_display":"有，住房抵押贷款等长期定额债务"},{"a_no":"3","a_display":"有，信用卡欠款、消费信贷等短期信用债务"},{"a_no":"4","a_display":"有，亲朋之间借款"}],"q_type":"radio","q_no":"3","q_display":"您是否有尚未清偿的数额较大的债务，如有，其性质是"},{"answer":[{"a_no":"1","a_display":"不超过50万元人民币"},{"a_no":"2","a_display":"50万-300万元（不含）人民币"},{"a_no":"3","a_display":"300万-1000万元（不含）人民币"},{"a_no":"4","a_display":"1000万元人民币以上"}],"q_type":"radio","q_no":"4","q_display":"您可用于投资的资产数额（包括金融资产和不动产）为"},{"answer":[{"a_no":"1","a_display":"现在或此前曾从事金融、经济或财会等与金融产品投资相关的工作超过两年"},{"a_no":"2","a_display":"已取得金融、经济或财会等与金融产品投资相关专业学士以上学位"},{"a_no":"3","a_display":"取得证券从业资格、期货从业资格、注册会计师证书（CPA）或注册金融分析师证书（CFA）中的一项及以上"},{"a_no":"4","a_display":"我不符合以上任何一项描述"}],"q_type":"radio","q_no":"5","q_display":"以下描述中何种符合您的实际情况"},{"answer":[{"a_no":"1","a_display":"有限：除银行活期账户和定期存款外，我基本没有其他投资经验"},{"a_no":"2","a_display":"一般：除银行活期账户和定期存款外，我购买过基金、保险等理财产品，但还需要进一步的指导"},{"a_no":"3","a_display":"丰富：我是一位有经验的投资者，参与过股票、基金等产品的交易，并倾向于自己做出投资决策"},{"a_no":"4","a_display":"非常丰富：我是一位非常有经验的投资者，参与过权证、期货或创业板等高风险产品的交易"}],"q_type":"radio","q_no":"6","q_display":"您的投资经验可以被概括为"},{"answer":[{"a_no":"1","a_display":"太高了"},{"a_no":"2","a_display":"偏高"},{"a_no":"3","a_display":"正常"},{"a_no":"4","a_display":"偏低"}],"q_type":"radio","q_no":"7","q_display":"有一位投资者一个月内做了15笔交易（同一品种买卖各一次算一笔），您认为这样的交易频率"},{"answer":[{"a_no":"1","a_display":"5个以下"},{"a_no":"2","a_display":"6至10个"},{"a_no":"3","a_display":"11至15个"},{"a_no":"4","a_display":"16个以上"}],"q_type":"radio","q_no":"8","q_display":"过去一年时间内，您购买的不同金融产品（含同一类型的不同金融产品）的数量是"},{"answer":[{"a_no":"1","a_display":"银行存款"},{"a_no":"2","a_display":"债券、货币市场基金、债券型基金或其它固定收益类产品"},{"a_no":"3","a_display":"股票、混合型基金、偏股型基金、股票型基金等权益类投资品种"},{"a_no":"4","a_display":"期货、融资融券"},{"a_no":"5","a_display":"复杂金融产品或其他产品"}],"q_type":"checkbox","q_no":"9","q_display":"以下金融产品，您投资经验在两年以上的有："},{"answer":[{"a_no":"1","a_display":"10万元以内"},{"a_no":"2","a_display":"10万元-30万元"},{"a_no":"3","a_display":"30万元-100万元"},{"a_no":"4","a_display":"100万元以上"},{"a_no":"5","a_display":"从未投资过金融产品"}],"q_type":"radio","q_no":"10","q_display":"如果您曾经从事过金融产品投资，在交易较为活跃的月份，平均月交易额大概是多少"},{"answer":[{"a_no":"1","a_display":"短期——0到1年"},{"a_no":"2","a_display":"中期——1到5年"},{"a_no":"3","a_display":"长期——5年以上"}],"q_type":"radio","q_no":"11","q_display":"您用于证券投资的大部分资金不会用作其它用途的时间段为"},{"answer":[{"a_no":"1","a_display":"债券、货币市场基金、债券基金等固定收益类投资品种"},{"a_no":"2","a_display":"股票、混合型基金、偏股型基金、股票型基金等权益类投资品种"},{"a_no":"3","a_display":"期货、融资融券"},{"a_no":"4","a_display":"复杂或高风险金融产品"},{"a_no":"5","a_display":"其他产品"}],"q_type":"checkbox","q_no":"12","q_display":"您打算重点投资于哪些种类的投资品种？"},{"answer":[{"a_no":"1","a_display":"全部投资于A"},{"a_no":"2","a_display":"大部分投资于A"},{"a_no":"3","a_display":"两种投资各一半"},{"a_no":"4","a_display":"大部分投资于B"},{"a_no":"5","a_display":"全部投资于B"}],"q_type":"radio","q_no":"13","q_display":"假设有两种不同的投资：投资A预期获得5%的收益，有可能承担非常小的损失；投资B预期获得20%的收益，但有可能面临25%甚至更高的亏损。您将您的投资资产分配为"},{"answer":[{"a_no":"1","a_display":"资产保值，我不愿意承担任何投资风险"},{"a_no":"2","a_display":"尽可能保证本金安全，不在乎收益率比较低"},{"a_no":"3","a_display":"产生较多的收益，可以承担一定的投资风险"},{"a_no":"4","a_display":"实现资产大幅增长，愿意承担很大的投资风险"}],"q_type":"radio","q_no":"14","q_display":"当您进行投资时，您的首要目标是"},{"answer":[{"a_no":"1","a_display":"10%以内"},{"a_no":"2","a_display":"10%-30%"},{"a_no":"3","a_display":"30%-50%"},{"a_no":"4","a_display":"超过50%"}],"q_type":"radio","q_no":"15","q_display":"您认为自己能承受的最大投资损失是多少？"},{"answer":[{"a_no":"1","a_display":"改善生活"},{"a_no":"2","a_display":"个体生产经营或证券投资以外的投资行为"},{"a_no":"3","a_display":"履行扶养、抚养或赡养义务"},{"a_no":"4","a_display":"本人养老或医疗"},{"a_no":"5","a_display":"偿付债务"}],"q_type":"radio","q_no":"16","q_display":"您打算将自己的投资回报主要用于"},{"answer":[{"a_no":"1","a_display":"18-30岁"},{"a_no":"2","a_display":"31-40岁"},{"a_no":"3","a_display":"41-50岁"},{"a_no":"4","a_display":"51-60岁"},{"a_no":"5","a_display":"超过60岁"}],"q_type":"radio","q_no":"17","q_display":"您的年龄是"},{"answer":[{"a_no":"1","a_display":"1-2人"},{"a_no":"2","a_display":"3-4人"},{"a_no":"3","a_display":"5人以上"}],"q_type":"radio","q_no":"18","q_display":"今后五年时间内，您的父母、配偶以及未成年子女等需负法定抚养、扶养和赡养义务的人数为"},{"answer":[{"a_no":"1","a_display":"高中或以下"},{"a_no":"2","a_display":"大学专科"},{"a_no":"3","a_display":"大学本科"},{"a_no":"4","a_display":"硕士及以上"}],"q_type":"radio","q_no":"19","q_display":"您的最高学历是"},{"answer":[{"a_no":"1","a_display":"您与配偶均有稳定收入的工作"},{"a_no":"2","a_display":"您与配偶其中一人有稳定收入的工作"},{"a_no":"3","a_display":"您与配偶均没有稳定收入的工作或者已退休"},{"a_no":"4","a_display":"未婚，但有稳定收入的工作"},{"a_no":"5","a_display":"未婚，目前暂无稳定收入的工作"}],"q_type":"radio","q_no":"20","q_display":"您家庭的就业状况是"}];
var question_answer = [{"answer":[{"a_no":"","a_display":"工资、劳务报酬"},{"a_no":"","a_display":"生产经营所得"},{"a_no":"3","a_display":"利息、股息、转让证券等金融性资产收入"},{"a_no":"","a_display":"出租、出售房地产等非金融性资产收入"},{"a_no":"","a_display":"无固定收入"}],"q_type":"radio","q_no":"1","q_display":"您的主要收入来源是"}];

var sortArry = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
console.log(question);
//题目生成
render_question(question);
//客观题
objective_question(question_answer);



//客户端回调，生成题目
function render_question(question){
	document.getElementById("answer").style.display = "none";
	document.getElementById("reset_btn").style.display = "none";
	document.getElementById("Q_form").style.display = "inline";
	var c = 'question_div';
    var con = document.getElementById("hiddenModalContent");
    var html = '';
    var ay = new Array();
    var len = question.length;
    var a_len = 0;
    var q = null;
    var a = null;
    var i = 0;
    var j = 0;
    var q_type = '';
    var q_no = '';
    var q_display = '';
    var q_real_no = '';
    var a_no = '';
    var a_val = '';
    var a_ele_name = '';
    var a_ele_id = '';

    for (i = 0; i < len; ++ i){
		if(question[i].q_type == 'radio'){
			var choiceTpe = '（单选）';
		}else if(question[i].q_type == 'checkbox'){
			var choiceTpe = '（多选）';
		}else{
			var choiceTpe = '';
		}
	
        q = question[i];
        q_type = q.q_type;
        q_no = q.q_no;
        q_display = q.q_display;
        q_real_no = q.q_real_no;
        a = q['answer'];
        a_len = a.length;
        ay.push("<div id='q_div_" + i +"'class='" + c + "'q_no='" + q_no +"'q_display='" + q_display + "'q_type='" + q_type + "'q_real_no='" + q_real_no +"'>");
        ay.push(    "<p id='p_quest_title'>" + q_no + "、" + q.q_display + choiceTpe + "</p>");
        for (j = 0; j < a_len; ++ j){
            switch(q_type){
                case 'radio':
                case 'checkbox':
                {
						a_ele_name = "quest_" + q.q_no;
						a_ele_id = a_ele_name + "_ans_" + a[j].a_no;
						a_no = a[j].a_no;
						a_value = a_ele_id;
						ay.push("<div>");
						//ay.push("<span class='p_ans_no'>" + a_no + ")</span>");
						ay.push(	"<input type='" + q_type +"' name='" + a_ele_name + "' id='" + a_ele_id + "' value='" + a_value + "' a_no='" + a_no + "' a_display='" + a[j].a_display + "' />");
						ay.push(    "<label for='" + a_ele_id +"'>" + sortArry[j] + "、" + a[j].a_display + "</label>");
						ay.push("</div>");
                    break;
                }
                case 'textarea':
                {
                    ay.push("<div q_type='" + q_type + "'><span>"+ sortArry[j] + "、</span>" +"<textarea name='" + a_ele_name + "id='" + a_ele_id + "'></textarea></div>");
                    break;
                }
            }
        }
        ay.push("</div>");
    }
    html = ay.join(" ");
    con.innerHTML = html;
    var div =	document.getElementById("btn");
	div.style.display = "";
}
//客户端回调，选择已有答案（客观题）
function objective_question(question_answer){
	var q_a = question_answer;
	if(q_a.length == 0) return;
	for(var q_i = 0; q_i < q_a.length; q_i++){
		var q_obj = q_a[q_i];
		var no = q_obj.q_no,
			answer = q_obj.answer;
			
		var q_div = document.getElementsByClassName('question_div');
		for(var i = 0 ;i<q_div.length;i++){
			var obj =  q_div[i];
			var q_type = obj.getAttribute('q_type');
			var idx = i;
			var q_no = obj.getAttribute("q_no");
			if(no == q_no){
				if (q_type == 'checkbox' || q_type == 'radio'){
					//遍历input
					var ele = obj.getElementsByTagName("input");
					for(j = 0 ;j<ele.length;j++){
						if(answer[j].a_no && !isNull(answer[j].a_no)){
							ele[j].checked = true;
						}
						ele[j].disabled = true;
					}
				}
				else{
					var ele = obj.getElementsByTagName("textarea");
					for(j = 0 ;j<ele.length;j++){
						ele[j].value = answer[j].a_display;
						ele[j].readOnly = true;
					}
				}
			}
		}
	}
}
//提交答题
function  do_ans_question(){
	var ansdata = do_get_ans();
	if (ansdata){
		var len = ansdata.length;
		var paper_answer = '';
		var i = 0;
		var j = 0;
		var q = null;
		var req = {};
		//alert(len);
		for (i = 0; i < len; ++i){
			// xxd,20140207
			q = ansdata[i];
			//req['q_no']= q.q_real_no;
			//req['q_type'] = q.q_type;
			var a_cell = '';
			if (q.q_type == 'radio'){
				a_cell= q.answer[0].a_checked_no;
			}
			else if (q.q_type == 'checkbox'){
				var clen = q.answer.length;
				a_cell= q.answer[0].a_checked_no;
				for(j = 1; j < clen; ++ j){
					a_cell = a_cell + "&" + q.answer[j].a_checked_no;
				}
			}
			if(i == len - 1){
				paper_answer = paper_answer + q.q_no + '#' + a_cell + '|';
			}else{
				paper_answer = paper_answer + q.q_no + '#' + a_cell + '|';
			}
		}
		req['a_cell']= paper_answer;
		//var param = packdata(req, '=', '\n');
		//document.getElementById('zz').value = param;
		//window.location.href="action=risk_ask_submit^"+paper_answer;
		//submit_answer  提交数据
		
		
		displayAnswer('75', '一级风险');
	}else{
		//var div =	document.getElementById("btn");
		//div.style.display = "none";
		//window.location.href="action=risk_ask_submit^zhou";
	}
}
function packdata(d, a, s){
	var data = '';
	for (k in d){
		if (typeof(d[k]) != 'function' && typeof(d[k]) != 'object'){
			data = data + k + a + d[k] + s;
		}
	}
	return data;
}
//验证答题
function do_get_ans(){
	var data = get_answer_data(create_answer, "hiddenModalContent", "question_div");
	// xxd,20140207
	if (data.tip_idx != -1){
		fnShowMsgBox("您的第" + data.tip_idx + "题没有回答");
		return null;
	}
	//
	if (data.ansdata == null){
		fnShowMsgBox('取答案失败');
		return null;
	}
	return data.ansdata;
}
//桥梁
function get_answer_data(handler, container, c){
	return handler(container, c);
}
//答题提示
function fnShowMsgBox(msg){
	//window.location.href="action=risk_ask_alert^ "+msg;
	
	showAnswerMessage(msg)
}

//获取答案默认处理函数
function create_answer(container, c){
	var ay = [];
	var q = null;
	var q_no= '';
	var q_display = '';
	var q_type = '';
	var q_real_no = '';
	var a_no=''
	var a_display = '';
	var a_value='';
	var a_checked_no = '';
	var ele_label = null;
	var q_idx = -1;
	var i = 0 ;
	var j = 0;
	var q_div = document.getElementsByClassName(c);
	for(i = 0 ;i<q_div.length;i++){
		var obj =  q_div[i];
		var idx = i;
		q_no = obj.getAttribute("q_no");
		q_display = obj.getAttribute("q_display");
		q_type = obj.getAttribute("q_type");
		q_real_no = obj.getAttribute("q_real_no");
		var answer = [];
		var flag = false;
		if (q_type == 'checkbox' || q_type == 'radio'){
			//遍历input
			var ele = obj.getElementsByTagName("input");
			for(j = 0 ;j<ele.length;j++){
				if(ele[j].checked){
					a_no = ele[j].getAttribute("a_no");
					a_display = ele[j].getAttribute("a_display");
					a_value = ele[j].value;
					a_checked_no = a_no;
					var a = {a_no:a_no, a_display:a_display, a_value:a_value, a_checked_no:a_checked_no};
					answer.push(a);
					flag = true;
					}
			}
			//判断没有选择答案处理
			if (flag != true && q_idx == -1){
				q_idx = idx + 1;//设置没答题的题号

			}
			q = {q_no:q_no, q_display:q_display, q_type:q_type, answer:answer,q_real_no:q_real_no};
		}
		else{
			var ele = obj.getElementsByTagName("textarea");
			for(j = 0 ;j<ele.length;j++){
				a_value = ele[j].value;
				var a = {a_no:'', a_display:'', a_value:a_value, a_checked_no:''};
				answer.push(a);
				//判断没有填写答案处理
				if (a_value == '' && q_idx == -1){
					q_idx = idx + 1;//设置没答题的题号
				}
			}
			q = {q_no:q_no, q_display:q_display, q_type:q_type, answer:answer};
		}
		ay.push(q);
	}
	return {ansdata:ay, tip_idx:q_idx};
}
//客户端回调，答题结果
function displayAnswer(score,level_name){
    var form  = document.getElementById("Q_form");
    form.style.display = "none";
	document.getElementById("btn").style.display = 'none';
	document.getElementById("msg").style.display = 'none';
    var answer = document.getElementById("answer");
	document.getElementById("reset_btn").style.display = "block";
	answer.style.display = 'block';
    answer.innerHTML = "<p>您的测评得分为<span style='color:#FF0000'>"+score+"</span>,您的测评等级为<span style='color:#FF0000'>"+level_name+"</span></p>";
}
//客户端回调，显示信息msg
function showAnswerMessage(retmsg){
    /*var answer = document.getElementById("answer");
	var msg = document.getElementById("msg");
	answer.style.display = "none";
	msg.innerHTML = retmsg;
	msg.style.display="inline";*/
	alert(retmsg);
	var count =retmsg.match(/\d+/g);
	count = Number(count) - 1;
	console.log(document.getElementById(' q_div_'+count));
	document.getElementById('q_div_'+count).scrollIntoView();
}
//重置
function reTest(){
	//window.location.href="action=risk_ask_retest^";

	window.location.reload();
}
function isNull(str){
	if(str == "" || str == undefined || str == null){
		return true;
	}
	return false;
}

 </script>
</html>
